-----
### ì˜ˆì œìš© ì„œë²„ ìš”ì²­ (JSON ë°°ì—´ í˜•íƒœ)
-----
1. ê²½ê¸° ê²°ê³¼ : ```https://showcases.yalco.kr/javascript/mockserver/race-result```
2. ê° ì„ ìˆ˜ë“¤ ì •ë³´ : ```https://showcases.yalco.kr/javascript/mockserver/runners/{1~5}```
3. í•™êµ ì •ë³´ : ```https://showcases.yalco.kr/javascript/mockserver/schools/{1~3}```

-----
### Fetch API
-----
1. Web APIì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ (ì¦‰, ë¸Œë¼ìš°ì €ì—ì„œ ì œê³µ)
2. ë„¤íŠ¸ì›Œí¬ë¡œë¶€í„° ë¦¬ì†ŒìŠ¤ë¥¼ ë°›ì•„ì˜¤ê¸° ìœ„í•œ ë‹¤ì–‘í•˜ê³  ê°•ë ¥í•œ ê¸°ëŠ¥ë“¤ ì œê³µ
   - AJAX : ì›¹ í˜ì´ì§€ê°€ ì—´ë¦° ìƒíƒœì—ì„œ ê³„ì†í•˜ì—¬ í•„ìš”ì— ë”°ë¼ ì¶”ê°€ì  ì •ë³´ì— ëŒ€í•œ ìš”ì²­ìœ¼ë¡œ ë°›ì•„ì˜¨ ì •ë³´ë“¤ì„ í˜ì´ì§€ì˜ ìš”ì†Œì— ì¶”ê°€ / ìˆ˜ì •
3. ```https://developer.mozilla.org/ko/docs/Web/API/Fetch_API```
4. ë³´ë‹¤ ì˜¤ë˜ëœ ë°©ë²• : XMLHttpRequest (```https://developer.mozilla.org/ko/docs/Web/API/XMLHttpRequest```)

-----
### fetch ë©”ì„œë“œ
-----
1. ë„¤íŠ¸ì›Œí¬ í†µì‹ ìœ¼ë¡œ ì›ê²©ì— ìš”ì²­ì„ ë³´ë‚´ê³  ë‹µì„ ë°›ì•„ì˜¤ëŠ” í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜
   - fetch('ë°›ì•„ì˜¬ ì›ê²© ë¦¬ì†ŒìŠ¤ì˜ ì£¼ì†Œ')
2. í•´ë‹¹ ë‚´ìš© ì°¸ê³  : ```https://developer.mozilla.org/en-US/docs/Web/API/fetch```
```js
// ğŸ’¡ ê²°ê³¼ê°€ Promiseì˜ ì¸ìŠ¤í„´ìŠ¤ì„ í™•ì¸
console.log(
  fetch('https://showcases.yalco.kr/javascript/mockserver/race-result')
);
```
<div align="center">
<img src="https://github.com/sooyounghan/Data-Base/assets/34672301/c0380641-bf4b-4025-ab7d-c1749a82c27d">
</div>

  - í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ thenìœ¼ë¡œ Method Chainning ê°€ëŠ¥
```js
fetch('https://showcases.yalco.kr/javascript/mockserver/race-result')
.then(response => {
  console.log(response);
  return response;
})
.then(response => response.json())
.then(console.log);
```
<div align="center">
<img src="https://github.com/sooyounghan/Data-Base/assets/34672301/b81d8556-d87f-413f-8dfe-ab49b472fa2b">
<img src="https://github.com/sooyounghan/Data-Base/assets/34672301/456445c9-5c1f-4ba1-a53b-452aa99e1892">
</div>

```js
fetch('https://showcases.yalco.kr/javascript/mockserver/race-result')
.then(response => response.json())
.then(console.log);
```
3. ë°˜í™˜ë˜ëŠ” ê²°ê³¼ : response
   - ìš”ì²­ì˜ ê²°ê³¼ì— ëŒ€í•œ ì •ë³´ë“¤ì„ ë‹´ì€ ê°ì²´
   - json ë©”ì„œë“œ - ê²°ê³¼ì˜ bodyë¡œ ë°›ì€ í…ìŠ¤íŠ¸ë¥¼ JSON ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜
<div align="center">
<img src="https://github.com/sooyounghan/Data-Base/assets/34672301/dc1f0a71-8f1f-4edb-8958-edef68d39d65">
</div>

4. ì£¼ì†Œ ë“± ì˜ëª»ëœ ê²½ìš° ë“± ì—ëŸ¬ ìƒí™©ì‹œ catchì—ì„œ ì²˜ë¦¬
```js
fetch('https://WRONG-ADDRESS')
.then(response => response.json())
.then(console.log)
.catch(msg => {
  console.error(`ğŸ˜³ ì—ëŸ¬ ë°œìƒ: ${msg}`)
})
.finally(() => {
  console.log('- - í†µì‹  ì¢…ë£Œ - -')
})
```
<div align="center">
<img src="https://github.com/sooyounghan/Data-Base/assets/34672301/3ffd1ebd-a647-461e-b127-8b069dded9a4">
</div>

-----
### ì˜ˆì œ ê²°ê³¼ ë¯¸ë¦¬ ë³´ê¸°
-----
```js
const SERVER_URL = 'https://showcases.yalco.kr/javascript/mockserver/';

fetch(SERVER_URL + 'race-result')
.then(response => response.json())
.then(console.log)
.catch(console.error);

[1, 2, 3, 4, 5].forEach(item => {
  fetch(`${SERVER_URL}runners/${item}`)
  .then(response => response.json())
  .then(console.log)
  .catch(console.error);
});

[1, 2, 3].forEach(item => {
  fetch(`${SERVER_URL}schools/${item}`)
  .then(response => response.json())
  .then(console.log)
  .catch(console.error);
});
```
<div align="center">
<img src="https://github.com/sooyounghan/Data-Base/assets/34672301/7d4dbc61-08fa-40ce-b3ad-ecd7f97f69a7">
<img src="https://github.com/sooyounghan/Data-Base/assets/34672301/edeff72d-24a7-434c-a508-c6e1af0b4c60">
<img src="https://github.com/sooyounghan/Data-Base/assets/34672301/ec626952-657e-45c3-acf4-550e3a9b8781">
</div>

-----
### ì—°ì† fetching ì˜ˆì œ
-----
1. ê²½ê¸° ê²°ê³¼ë¥¼ ë°›ì•„ì˜¨ ë’¤ 1ë“± ì£¼ì ì„ íƒ
2. í•´ë‹¹ ì£¼ìì˜ ìƒì„¸ì •ë³´ë¥¼ ë°›ì•„ì˜¨ ë’¤ í•™êµ ì½”ë“œ ì¶”ì¶œ
3. í•´ë‹¹ í•™êµì˜ ì •ë³´ ë°›ì•„ì˜¤ê¸°

4. í”„ë¡œë¯¸ìŠ¤ í˜•íƒœë¡œ êµ¬í˜„
```js
const SERVER_URL = 'https://showcases.yalco.kr/javascript/mockserver/';

fetch(SERVER_URL + 'race-result')
.then(result => result.json())
.then(arry => {
  return arry.sort((a, b) => {
    return a.record - b.record
  })[0].runner_idx
})
.then(winnerIdx => {
  return fetch(`${SERVER_URL}runners/${winnerIdx}`)
})
.then(result => result.json())
.then(({school_idx}) => school_idx)
.then(schoolIdx => {
  return fetch(`${SERVER_URL}schools/${schoolIdx}`)
})
.then(result => result.json())
.then(console.log)
.catch(console.error);
```
<div align="center">
<img src="https://github.com/sooyounghan/Data-Base/assets/34672301/7176b8ae-ed89-4146-814d-ea06c8d1cab9">
</div>

5. async, awaitìœ¼ë¡œ êµ¬í˜„
```js
const SERVER_URL = 'https://showcases.yalco.kr/javascript/mockserver/';

async function getWinnersSchool () {

  const raceResult = await fetch(SERVER_URL + 'race-result')
  .then(result => result.json());

  const winnerIdx = raceResult
  .sort((a, b) => {
    return a.record - b.record
  })[0].runner_idx;

  const winnerInfo = await fetch(`${SERVER_URL}runners/${winnerIdx}`)
  .then(result => result.json());

  const schoolIdx = winnerInfo.school_idx;

  const schoolInfo = await fetch(`${SERVER_URL}schools/${schoolIdx}`)
  .then(result => result.json());

  console.log(schoolInfo);
}

getWinnersSchool();
```
<div align="center">
<img src="https://github.com/sooyounghan/Data-Base/assets/34672301/58ef92e0-3efd-41db-a080-a2e2b1569228">
</div>
