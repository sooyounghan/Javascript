-----
### addEventListener
-----
1. EventTargetì˜ ê¸°ëŠ¥
2. ì²« ë²ˆì§¸ ì¸ìë¡œ ì£¼ì–´ì§„ ì´ë¦„ì˜ ì´ë²¤íŠ¸ ë°œìƒ ì‹œ, ë‘ ë²ˆì§¸ ì¸ìë¡œ ì£¼ì–´ì§„ ì½œë°±í•¨ìˆ˜ ì‹¤í–‰
  - https://developer.mozilla.org/ko/docs/Web/API/EventTarget/addEventListener
  - ì´ë²¤íŠ¸ ëª©ë¡ : https://developer.mozilla.org/ko/docs/Web/Events

-----
### addEventListener - click Event
-----
1. ìš”ì†Œê°€ í´ë¦­ë˜ì—ˆì„ ë•Œ ì´ë²¤íŠ¸ ë°œìƒ
2. alert : ì£¼ì–´ì§„ ë©”ì„¸ì§€ë¡œ ì•Œë¦¼ íŒì—…ì°½ì„ í‘œì‹œ (windowì˜ ê¸°ëŠ¥)
```js
document.querySelector('#button1')
.addEventListener('click', () => {
  alert('ã…‡ã…‡ ì–´ì„œì˜¤ê³ ');
});
```
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/7f73c7e2-908e-4cac-add8-ef3f9b5e14c1">
</div>

-----
### addEventListener - ì´ë²¤íŠ¸ ê°ì²´
-----
1. eventë¼ëŠ” ì¸ì(e)ë¥¼ ë°›ì•„ì˜¬ ìˆ˜ ìˆìŒ
2. ìƒˆë¡œ ê³ ì¹¨ í›„ ì‹¤í–‰í•˜ëŠ” ì´ìœ  : addEventListnerì— ë‹¤ë¥¸ ì´ë²¤íŠ¸ë¥¼ ì„¤ì •í•˜ê²Œ ë˜ë©´, ì´ì „ ì´ë²¤íŠ¸ê°€ ì‚¬ë¼ì§€ëŠ” ê²ƒì´ ì•„ë‹Œ ê°™ì´ ì‹¤í–‰ 
```js
// â™»ï¸ ìƒˆë¡œê³ ì¹¨ í›„ ì‹¤í–‰
document.querySelector('#button1')
.addEventListener('click', (e) => {
  console.log(e);
});
```
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/b160ab6d-b4e4-44aa-90a4-0245f0c7d69c">
<img src="https://github.com/sooyounghan/Java/assets/34672301/e519695c-2416-4dc5-8ecf-e884b0192ee4">
<img src="https://github.com/sooyounghan/Java/assets/34672301/e37586b1-96de-4ffd-9f88-aa7b2d46aac4">
<img src="https://github.com/sooyounghan/Java/assets/34672301/ef587fd0-4ce6-430e-9709-4a22eda863f6">
<img src="https://github.com/sooyounghan/Java/assets/34672301/204b74bc-ac87-4e17-85bd-59a8ce7c7b59">
</div>

  - PointEventë¼ëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ ì¶œë ¥
  - clientX, clientY : ë²„íŠ¼ì—ì„œì˜ ì¢Œí‘œ
  - screentX, screenY : ìŠ¤í¬ë¦°ì—ì„œì˜ ì¢Œí‘œ
  - ë‹¤ì–‘í•œ ì¸ì ì¡´ì¬
  - ProtoType : MouseEvent - UIEvent - Event - Object

----
### addEventListener - eventListnerì—ì„œì˜ this
----
1. function ì„ ì–¸ í•¨ìˆ˜ì™€ í™”ì‚´í‘œ í•¨ìˆ˜ ë¹„êµ
   - function ì„ ì–¸ í•¨ìˆ˜ëŠ” ë™ì ìœ¼ë¡œ this ë°”ì¸ë”©ë˜ì–´, ë™ì¼í•œ ê°’ ì¶œë ¥
```js
// â™»ï¸ ìƒˆë¡œê³ ì¹¨ í›„ ì‹¤í–‰
document.querySelector('#button1')
.addEventListener('click', function (e) {
  console.log(this); // button
  console.log(e.target); // í•´ë‹¹ ì´ë²¤íŠ¸ê°€ ë°œìƒí•œ ê°ì²´ ë°˜í™˜ (ì—¬ê¸°ì„œëŠ” button)
  this.textContent = 'í´ë¦­ë¨';
});
```
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/d46fa035-8a01-46c2-aff2-187668acc97b">
</div>

  - í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” ì •ì ìœ¼ë¡œ this ë°”ì¸ë”©
```js
// â™»ï¸ ìƒˆë¡œê³ ì¹¨ í›„ ì‹¤í–‰
document.querySelector('#button1')
.addEventListener('click', (e) => {
  console.log(this);
  console.log(e.target);
  e.target.textContent = 'í´ë¦­ë¨';
});
```
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/6805924d-3128-4c4d-ac1f-537b04dc678b">
</div>

-----
### addEventListener - mouseenter, mouseleave Event
-----
1. ë§ˆìš°ìŠ¤ ì»¤ì„œê°€ ë“¤ì–´ì˜¬ ë•Œ / ë‚˜ê°ˆ ë•Œ ì´ë²¤íŠ¸ ë°œìƒ
2. setTimeOut : íƒ€ì„ì•„ì›ƒ ì„¤ì •, clearTimeoutì— ì‚¬ìš©ë  ì‹ë³„ì ë°˜í™˜
3. clearTimeout : ì¸ìë¡œ ì£¼ì–´ì§„ ì‹ë³„ìì˜ íƒ€ì„ì•„ì›ƒ í•´ì œ
```js
const $button2 = document.querySelector('#button2');

let timeout;
let interval;
let countdown;
```

```js
$button2.addEventListener('mouseenter', () => {
  if (timeout) clearTimeout(timeout); // timeout í•´ì œ, ë§ˆìš°ìŠ¤ ì—°ì†ìœ¼ë¡œ hoverí–ˆì„ ë•Œ, ì´ì „ ê²ƒì„ ì·¨ì†Œí•˜ê³  ìƒˆ timeoutì„ ì‹œì‘í•˜ê¸° ìœ„í•¨ 

  $button2
  .firstElementChild
  .textContent = 'ğŸ’£ ì¹˜ì›Œë¼, 5ì´ˆ ì¤€ë‹¤'; // 'ë§ˆìš°ìŠ¤ ì»¤ì„œ ì˜¬ë¦¬ì§€ ë§ˆë¼.' ë¶€ë¶„

  timeout = setTimeout(() => {
    $button2
    .firstElementChild
    .textContent = 'ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥';
  }, 5000);
});
```
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/31109981-07b1-4c7f-a6fb-29d8b2b3b623">
<img src="https://github.com/sooyounghan/Java/assets/34672301/5a36ccb7-fb31-410f-8b7e-b5a169ff9243">
</div>

```js
$button2.addEventListener('mouseleave', () => {
  if (timeout) clearTimeout(timeout);

  $button2
  .firstElementChild
  .textContent = 'ì˜¬ë¦¬ì§€ ë§ë¼ê³  í•˜ë©´ ì˜¬ë¦¬ì§€ ë§ˆë¼';
});
```
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/2ab07a59-983c-4315-ac9c-a5291d732598">
</div>

-----
### addEventListener - ê°™ì€ ì´ë²¤íŠ¸ì— ëŒ€í•´ ì—¬ëŸ¬ í•¸ë“¤ëŸ¬ ë“±ë¡ ê°€ëŠ¥
-----
1. setInterval : ì²« ë²ˆì§¸ ì¸ìë¡œ ë°›ì€ ì½œë°±í•¨ìˆ˜ë¥¼ ë‘ ë²ˆì§¸ ì¸ìì˜ ë°€ë¦¬ì´ˆë§ˆë‹¤ ì‹¤í–‰
2. clearInterval : ì¸ìë¡œ ì£¼ì–´ì§„ ì‹ë³„ìì˜ Interval í•´ì œ

```js
$button2.addEventListener('mouseenter', () => {
  if (interval) clearInterval(interval);

  countdown = 5;

  $button2
  .lastElementChild
  .textContent = countdown;

  interval = setInterval(() => {
    $button2
    .lastElementChild
    .textContent = --countdown;

    if (!countdown) clearInterval(interval);
  }, 1000);
});
```
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/3364f3ce-48d1-4c5d-8f27-c24271a2f93a">
<img src="https://github.com/sooyounghan/Java/assets/34672301/0a24fb06-afc3-4bc3-8bef-d58a2d4c4550">
<img src="https://github.com/sooyounghan/Java/assets/34672301/fa5b0d20-48bf-4ef0-a851-a07de634e1fc">
</div>

```js
$button2.addEventListener('mouseleave', () => {
  if (interval) clearInterval(interval);

  countdown = 0;

  $button2
  .lastElementChild
  .textContent = countdown;
});
```
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/34cb96db-978b-49b2-a52d-7f9d60740230">
</div>

-----
### addEventListener - focus, blur Event
-----
1. ìš”ì†Œê°€ í¬ì»¤ìŠ¤(ì…ë ¥ì„ ìœ„í•´ ì„ íƒ) ë˜ì—ˆì„ ë•Œ / í•´ì œë˜ì—ˆì„ ë•Œ ì´ë²¤íŠ¸ ë°œìƒ
```js
const $input1 = document.querySelector('#input1');
```
```js
$input1.addEventListener('focus', () => {
  $input1.setAttribute('placeHolder', 'ì–´! ì™œ, ë­ ì…ë ¥í•˜ì‹œê²Œìš”?');
});
```
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/22a2aa91-111b-4ff6-b49f-41b56d1c222c">
<img src="https://github.com/sooyounghan/Java/assets/34672301/fff3a108-5f9d-4aff-9e4b-404c822682a0">
</div>

```js
$input1.addEventListener('blur', () => {
  $input1.setAttribute('placeHolder', 'ê·¸ëƒ¥ ê°€ì‹œë„¤...');
});
```
<div align="center">
<img src="https://github.com/sooyounghan/Java/assets/34672301/065394d6-de88-48d2-b496-98fe225d24ca">
</div>

-----
### addEventListener - keyup Event
-----
1. í‚¤ë³´ë“œ í‚¤ê°€ ëˆŒë¦° í›„ ì˜¬ë¼ì˜¬ ë•Œ ì´ë²¤íŠ¸ ë°œìƒ
2. keydown, keypressì™€ ë¹„êµ
   - keydown : í‚¤ë³´ë“œ í‚¤ê°€ ëˆŒë ¸ì„ ë•Œ ì‹œì ì˜ ì´ë²¤íŠ¸ ë°œìƒ
   - keypress : í‚¤ë³´ë“œ í‚¤ê°€ ëˆ„ë¥´ê³  ìˆëŠ” ìƒíƒœì¼ ë•Œ ì´ë²¤íŠ¸ ë°œìƒ

```js
const $ul = document.querySelector('ul');
const $input2 = document.querySelector('#input2');
```

```js
$input2.addEventListener('keyup', (e) => {
  if (e.key !== 'Enter') return;

  $newLi = document.createElement('li');
  $newLi.textContent = e.target.value;
  $ul.appendChild($newLi);

  e.target.value = '';
});
```
<div align="center">
<img src="https://github.com/sooyounghan/HTTP/assets/34672301/61c5191b-c43e-46d0-97d0-86e38df89c10">
<img src="https://github.com/sooyounghan/HTTP/assets/34672301/b1f682a4-43f6-4190-94ba-97bff52cc68a">
<img src="https://github.com/sooyounghan/HTTP/assets/34672301/996f4184-6dcf-4381-b88e-ce38a1ec222d">
</div>

-----
### addEventListener - change Event
-----
1. Input ìš”ì†Œì˜ ê°’ì´ ë°”ë€” ë•Œ ì´ë²¤íŠ¸ ë°œìƒ
2. ì˜ˆì œ
   - ìë°”ìŠ¤í¬ë¦½ì—ì„œ fetchë¡œ ë‚´ìš©ì„ ë°›ì•„ì™€ ì´ë¥¼ í…Œì´ë¸” í˜•íƒœë¡œ ì¶œë ¥
```html

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê²½ì£¼ ê¸°ë¡ ì˜ˆì œ</title>
  <link rel="stylesheet" href="./02.css">
  <script defer src="./02.js"></script>
</head>
<body>

  <h1>ë‹¬ë¦¬ê¸° ê²½ì£¼ ê¸°ë¡</h1>

  <select id="school">
    <option value="">ì „ì²´ í•™êµ</option>
    <option value="ê·¼ì„±">ê·¼ì„±ëŒ€</option>
    <option value="ë³µê·¼">ë³µê·¼ëŒ€</option>
    <option value="ë°•ë ¥">ë°•ë ¥ëŒ€</option>
  </select>

  <input type="number" id="grade" value="1" min="1" max="4">
  <label for="sort">í•™ë…„ ì´ìƒ</label>

  <input type="checkbox" id="sort">
  <label for="sort">ê¸°ë¡ìˆœ ì •ë ¬</label>

  <table>
    <thead>
      <th>ë²ˆí˜¸</th>
      <th>í•™êµ</th>
      <th>í•™ë…„</th>
      <th>ì´ë¦„</th>
      <th>ê¸°ë¡</th>
    </thead>
    <tbody id="raceTbody">
    </tbody>
  </table>
  
</body>
</html>
```

```css
body {
  padding: 16px 32px;
  font-size: 1.2em;
}

table {
  border-collapse: collapse;
}

th, td {
  text-align: center;
  padding: 8px 16px;
  border: 1px solid #ddd;
}

th {
  background-color: #eee;
  border-bottom: 2px solid #ddd;
}

select, input {
  margin-bottom: 18px;
  font-size: 1em;
  padding: 4px 8px;
}

input {
  margin-left: 16px;
}
```

```js
let raceData;
getRaceData();

async function getRaceData () {
  const SERVER_URL = 'https://showcases.yalco.kr/javascript/mockserver/';

  // ê²½ì£¼ ê¸°ë¡ ë°›ê¸°
  const raceResult = await fetch(SERVER_URL + 'race-result')
  .then(result => result.json());
  console.log('1.', raceResult);

  const runners = [];
  const runnerIdxs = raceResult
  .map(itm => itm['runner_idx']);

  // ê¸°ë¡ìƒ ì£¼ì ë²ˆí˜¸ì— ë”°ë¼ ì£¼ìë“¤ì˜ ì •ë³´ ë°›ê¸°
  for (const runnerIdx of runnerIdxs) {
    const runner = await fetch(`${SERVER_URL}runners/${runnerIdx}`)
    .then(result => result.json())
    runners.push(runner);
  }
  console.log('2.', runners);

  // ì£¼ìë“¤ì˜ í•™êµ ë²ˆí˜¸ ì¤‘ ì¤‘ë³µì„ ê±°ë¥¸ ë’¤ ì´ì— ë”°ë¼ í•™êµ ì •ë³´ ë°›ê¸°
  const schools = [];
  const schoolIdxs = [
    ...new Set(
      runners.map(itm => itm['school_idx'])
    )
  ];
  for (const schoolIdx of schoolIdxs) {
    const school = await fetch(`${SERVER_URL}schools/${schoolIdx}`)
    .then(result => result.json())
    schools.push(school);
  }
  console.log('3.', schools);

  // ì„¸ ë°°ì—´ì˜ ê°ì²´ë“¤ì„ ì¡°ì¸
  raceData = raceResult
  .map(result => {
    const runner = {
      ...runners
      .find(({idx}) => idx === result.runner_idx)
    }

    runner.school = schools
    .find(({idx}) => idx === runner.school_idx)
    .name

    delete runner.school_idx;
    delete runner.idx;

    return {
      ...result,
      ...runner
    }
  });
  console.log('4.', raceData);

  fillRaceTable();
}

function fillRaceTable () {

  // ë°°ì—´ ë³µì‚¬
  let data = [...raceData];

  const _school = document.querySelector('#school').value;
  const _grade = document.querySelector('#grade').value;
  const _sort = document.querySelector('#sort').checked;

  // ì¸í’‹ ìš”ì†Œì˜ ê°’ë“¤ì— ë”°ë¼ í•„í„°ë§ ë˜ëŠ” ì •ë ¬
  if (_school) data = data.filter(({school}) => school.startsWith(_school));
  if (_grade) data = data.filter(({grade}) => grade >= _grade);
  if (_sort) data.sort((a, b) => a.record - b.record);

  // ë¨¼ì € tbody ë¶€ë¶„ì„ ë¹„ì›€
  const $tbody = document.querySelector('#raceTbody');
  while ($tbody.firstChild) {
    $tbody.removeChild($tbody.firstChild);
  }

  // tbody ì±„ì›Œë„£ê¸°
  data.forEach(datum => {
    const $newTr = document.createElement('tr');

    ['runner_idx', 'school', 'grade', 'name', 'record']
    .forEach(itm => {
      const $newTd = document.createElement('td');
      $newTd.textContent = datum[itm];
      $newTr.appendChild($newTd);
    });
    $tbody.appendChild($newTr);
  });
}
```

```js
document.querySelector('#school')
.addEventListener('change', (e) => {
  console.log(e.target.value);
  fillRaceTable();
});
```
<div align="center">
<img src="https://github.com/sooyounghan/HTTP/assets/34672301/924b40c4-ada1-49c5-8a2d-9fc5034d7d98">
<img src="https://github.com/sooyounghan/HTTP/assets/34672301/a85c73c0-e952-4f91-b045-1ad6d6ac3fa5">
<img src="https://github.com/sooyounghan/HTTP/assets/34672301/416c9424-8e60-48e4-8322-f12dcfa9511e">
<img src="https://github.com/sooyounghan/HTTP/assets/34672301/96dc6e56-6560-4594-bac6-ef4741bc7c68">
</div>

```js
document.querySelector('#grade')
.addEventListener('change', () => {
  fillRaceTable();
});
```
<div align="center">
<img src="https://github.com/sooyounghan/HTTP/assets/34672301/9bd6eb25-28d4-489b-970a-c5db709b99b8">
<img src="https://github.com/sooyounghan/HTTP/assets/34672301/0d134e5c-fe1d-40c7-ba02-1deed575a7b8">
<img src="https://github.com/sooyounghan/HTTP/assets/34672301/8d24bf26-7981-4a75-ab61-bcf9f6672f5b">
</div>

```js
document.querySelector('#sort')
.addEventListener('change', () => {
  fillRaceTable();
});
```
<div align="center">
<img src="https://github.com/sooyounghan/HTTP/assets/34672301/f06b00f1-e277-4f30-80ab-ec8ac4b70164">
</div>
