-----
### ì—ëŸ¬ í•¸ë“¤ë§ (Error Handling)ì˜ í•„ìš”ì„±
-----
: ì—ëŸ¬(Error) ë°œìƒì— ëŒ€ë¹„í•˜ì§€ ì•Šìœ¼ë©´, í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œ

```js
console.log('ì—ëŸ¬ ë°œìƒ ì „');

// âš ï¸ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ì½”ë“œ
(3).split(''); // ìˆ«ì íƒ€ì…ì˜ ë¬¸ìì—´ ë©”ì„œë“œ split í•¨ìˆ˜ ì ìš© 

// ì¶œë ¥ë˜ì§€ ì•ŠìŒ
console.log('ì—ëŸ¬ ë°œìƒ í›„');
```
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/2cca806d-6573-41a2-8a8f-3035842c6b37">
</div>

-----
### ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ì—ëŸ¬ í•¸ë“¤ë§
-----
: https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/try...catch

1. try ... catch ë¬¸
```js
console.log('ì—ëŸ¬ ë°œìƒ ì „');

try {
  (3).split('');

} catch (e) {
  console.error('ğŸ›‘ ì—ëŸ¬!!', e);
}

console.log('ì—ëŸ¬ ë°œìƒ í›„');
```
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/9bfed767-cd39-4b7b-a190-59c98769e179">
</div>

  - try ë¸”ë¡
    + ì—ëŸ¬ ë°œìƒ ì—¬ì§€ê°€ ìˆëŠ” ì½”ë“œ í¬í•¨
    + ì´ê³³ì—ì„œ ë°œìƒí•œ ì—ëŸ¬ëŠ” í”„ë¡œê·¸ë¨ì„ ë©ˆì¶”ê²Œ í•˜ì§€ ì•ŠìŒ

  - catch ë¸”ë¡
    + ì—ëŸ¬ ë°œìƒ ì‹œ ì‹¤í–‰í•  ì½”ë“œ í¬í•¨
    + ë°œìƒí•œ ì˜¤ë¥˜ ê°ì²´ë¥¼ ì¸ìë¡œ ë°›ìŒ

```js
const arr = ['ABC', 'ê°€ë‚˜ë‹¤', 123, '123'];

function getLetterArray (str) {
  // ğŸ’¡ ì¸ìë¡œ ì–´ë–¤ íƒ€ì…ì˜ ê°’ì´ ì£¼ì–´ì§ˆì§€ ëª¨ë¥´ëŠ” ìƒí™©
  try {
    return str.split('');

  } catch (e) {
    console.error('ğŸ›‘ ì—ëŸ¬!!', e);
    return [];
  }
}

arr.forEach(i => {
  console.log(getLetterArray(i));
});
```
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/3b243976-a8b0-459d-ad3a-1e7b78a036a1">
</div>

2. try ... catch ... finally ë¬¸
   - fianlly ë¸”ë¡
     + ì˜¤ë¥˜ ë°œìƒ ì—¬ë¶€ì™€ ê´€ê³„ ì—†ì´ í•œ ë²ˆ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ í¬í•¨
```js
function connect () { console.log('â˜€ï¸', 'í†µì‹  ì—°ê²°'); }
function disconnect () { console.log('ğŸŒ™', 'í†µì‹  ì—°ê²° í•´ì œ'); }
function sendArray (arr) { console.log('ì „ì†¡', arr); }

function sendStringAsArray (str) {
  connect();

  try {
    sendArray(str.split(''));
    return true;

  } catch (e) {
    console.error('ğŸ›‘ ì—ëŸ¬!!', e);
    return false;

  } finally {
    // ğŸ’¡ ì „ì†¡ ì„±ê³µ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ ì—°ê²°ì€ ëŠì–´ì•¼ í•¨
    disconnect();
    console.log('- - - - - - - -');
  }

  // â“ ì´ê³³ì— ë„£ëŠ” ê²ƒê³¼ ë¬´ì—‡ì´ ë‹¤ë¥¸ê°€?
  // ì•„ë˜ë¡œ ëŒ€ì²´í•˜ì—¬ ì‹¤í–‰í•´ ë³¼ ê²ƒ
  // disconnect();
  // console.log('- - - - - - - -');
}

['ABC', 'ê°€ë‚˜ë‹¤', 123, '123'].forEach(i => {
  console.log(
    sendStringAsArray(i) 
    ? '[ì„±ê³µ]' : '[ì‹¤íŒ¨]', '\n\n'
  );
});
```
  - tryë‚˜ catchë¬¸ì— returnì´ ìˆë”ë¼ë„ ë°˜ë“œì‹œ fianllyë¬¸ì€ ì‹¤í–‰
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/3f464326-c8be-4204-b7fc-98c3bf4d6e4e">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/4a581aed-b2f9-4a24-9403-89ffaafd989b">
</div>

  - ì£¼ì„ì„ ì„œë¡œ ë°”ê¿”ì„œ ì‹¤í–‰í•˜ë©´, returnë¬¸ì— ì˜í•´ finally ë¬¸ì€ ë¯¸ ì‹¤í–‰, ì•„ë˜ ì½”ë“œ ë˜í•œ returnë¬¸ì— ì˜í•´ ë¯¸ì‹¤í–‰
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/8d9508ba-581f-4cbd-984e-863ee2ace2f1">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/e3c8f89c-ebe1-4ead-aa46-597529aa2e6d">
</div>

-----
### Error ê°ì²´
-----
* ìœ„ì˜ ì½”ë“œì—ì„œ console.log(e)ì™€ eì— ëŒ€í•œ typeofë¥¼ í™•ì¸í•˜ë©´, objectì™€ ì´ì— ë§ëŠ” ë‚´ìš©ì´ stringìœ¼ë¡œ ì¶œë ¥ë¨ì„ ì•Œ ìˆ˜ ìˆìŒ
  - ì¦‰, errorë¥¼ ë‹´ê³  ìˆëŠ” ê²ƒ ë˜í•œ ê°ì²´
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/eb8173b0-0015-439a-8491-c4dd109fcc12">
</div>

: https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Error
1. ì—ëŸ¬ ë°œìƒ ì‹œ ë˜ì ¸ì§€ëŠ”(thrown) ê°ì²´
2. ì—ëŸ¬ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‹´ê³  ìˆìŒ
3. ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šì•„ë„, ì§ì ‘ ìƒì„±í•˜ì—¬ ë˜ì§€ê¸° ê°€ëŠ¥
4. ê¸°ë³¸ ìƒì„±ê³¼ ì‚¬ìš©ë²•
  - ê¸°ë³¸ ìƒì„± : new Error('Message');
```js
const error = new Error('ë­”ê°€ ì˜ëª»ëì–´');

console.error(error);
```
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/1779aace-f9f0-44aa-bf4d-05ade5d209fa">
</div>

  - ë‘ ë²ˆì§¸ ì¸ìë¡œ ê°ì²´ë¥¼ í†µí•´ ì´ìœ  ëª…ì‹œ ê°€ëŠ¥
```js
// ë‘ ë²ˆì§¸ ì¸ìë¡œ ì´ìœ ë¥¼ ëª…ì‹œí•  ìˆ˜ë„ ìˆìŒ
const error = new Error(
  'ë­”ê°€ ì˜ëª»ëì–´',
  { cause: 'ë­˜ ì˜ëª»í–ˆìœ¼ë‹ˆê¹Œ' }
);

console.error(error);
```
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/c6c34656-59c6-44da-ac06-8746a5fb00f2">
</div>

  - ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œí¼í‹°ì™€ ë©”ì„œë“œ
```js
console.log(error.name);
console.log(error.message);

// causeë¥¼ ì…ë ¥í–ˆì„ ê²½ìš°
console.log(error.cause);

// ì—ëŸ¬ ìì²´ë¥¼ ë¡œê·¸ ì¶œë ¥í•˜ë©´ ë‚˜ì˜¤ëŠ” ë¬¸êµ¬
console.log(error.toString());
```
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/04757416-cd50-45ec-a468-0f6af4f49902">
</div>

5. ì˜ë„ì ìœ¼ë¡œ ì—ëŸ¬ ë°œìƒì‹œí‚¤ëŠ” ë°©ë²•
```js
throw new Error('ì´ìœ ë¥¼ ë¬»ì§€ ë§ˆë¼');
```
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/c87f3882-20f9-4259-a6a2-598461961576">
</div>

-----
### Errorì˜ ì¢…ë¥˜
-----
1. ì•„ë˜ ì—ëŸ¬ëŠ” ëª¨ë‘ Error Classë¡œë¶€í„° ìƒì† ë°›ìŒ
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/e3a64a84-e8af-4c37-8640-f9210758a56f">
</div>

   - ì–´ë–¤ ë¬¸ì œì— ì˜í•œ ì—ëŸ¬ì¸ì§€ ì‰½ê²Œ ì‹ë³„ ê°€ëŠ¥
   - ê¸°íƒ€ ì—ëŸ¬ ìœ í˜• : https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Error#%EC%98%A4%EB%A5%98_%EC%9C%A0%ED%98%95

2. ì˜ˆì œ
   - SyntaxError
```js
const x x;
```
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/c29477af-734a-4b06-b872-d1f653d816d2">
</div>

```js
const errorFuncs = [
  // ìë£Œí˜•ì— ë§ì§€ ì•ŠëŠ” ë©”ì„œë“œ í˜¸ì¶œ (TypeError)
  () => { (3).split(''); },

  // ì„ ì–¸ë˜ì§€ ì•Šì€ í•¨ìˆ˜ í˜¸ì¶œ (ReferenceError)
  () => { hello(); },

  // ë¶€ì ì ˆí•œ ìˆ«ìë¥¼ ì¸ìë¡œ ì „ë‹¬ (RangeError)
  () => { (123.45).toFixed(-1); }
];

errorFuncs.forEach(func => {
  try {
    func();

  } catch (e) {
    console.error(e);
    console.log(e.name);
    console.log(e.message, '\n\n');
  }
});
```
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/ec735c13-7a86-4da3-9c60-aacb9cbf9352">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/33e8b10b-a89a-46e0-be6a-90b6b6c8e7cc">
</div>

3. ì˜¤ë¥˜ ì¢…ë¥˜ì— ë”°ë¼ ëŒ€ì²˜í•˜ê¸°
```js
errorFuncs.forEach(func => {
  try {
    func();

  } catch (e) {
    if (e instanceof TypeError) {
      console.error('ìë£Œí˜• í™•ì¸í•˜ì„¸ìš”.');
      return;
    }
    if (e instanceof ReferenceError) {
      console.error('ì„ ì–¸ ì•ˆ ëœ ê±° ì“´ ê±° ì—†ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.');
      return;
    }
    console.error('ì•„ë‹ˆ, ë­˜ í•œ ê±°ì—ìš”?');
  }
});
````
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/52832a17-37ed-4eec-9fd0-56e3ef04d34c">
</div>

4. ì§ì ‘ ì˜¤ë¥˜ë¥¼ ìƒì„±í•˜ì—¬ ë˜ì§€ê¸°
   - ì»´í“¨í„°ê°€ ì¸ì§€í•˜ì§€ ëª»í•˜ëŠ” ì—ëŸ¬ ìˆ˜ë™ ë°œìƒ
```js
// íŠ¹ì • ì›”ì˜ ë‹¹ë²ˆìœ¼ë¡œ ì§€ì›í•˜ëŠ” í•¨ìˆ˜
function applyForMonth (date) {
  try {
    if (typeof date !== 'number') { // TypeError
      throw new TypeError('ìˆ«ìë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    }
    if (date < 1 || date > 12) { // RangeError
      throw new RangeError('ìœ íš¨í•œ ì›”ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    }

    console.log(`${date}ì›” ë‹¹ë²ˆìœ¼ë¡œ ë“±ë¡ë˜ì…¨ìŠµë‹ˆë‹¤.`); // ì—ëŸ¬ê°€ ì—†ì„ ì‹œ

  } catch (e) {
    console.error('ğŸ›‘ ì—ëŸ¬ ë°œìƒ!', e);
    console.log('ë‹¤ì‹œ ë“±ë¡í•´ì£¼ì„¸ìš”.');
  }
}

applyForMonth(5);

applyForMonth('5');

applyForMonth(13);
```
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/e257aaea-d766-4333-a960-35ba10008ec4">
</div>

4. ì»¤ìŠ¤í…€ ì—ëŸ¬ ë§Œë“¤ê¸°
   : https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Error#%EC%82%AC%EC%9A%A9%EC%9E%90_%EC%A0%95%EC%9D%98_%EC%97%90%EB%9F%AC_%ED%83%80%EC%9E%85
   
```js
class MilitaryError extends Error {
  constructor (position, ...params) {
    super(...params); // ë¶€ëª¨ í´ë˜ìŠ¤ì¸ Errorí´ë˜ìŠ¤ì˜ ì¸ìë¡œ ...params, ì¦‰ ìŠ¤í”„ë ˆë“œ ëœ ë‚´ìš©ì´ superë¡œ í†µí•´ ì—ëŸ¬ ë©”ì„¸ì§€ë¡œ ì ìš©

    this.name = 'MilitaryError'; // í•´ë‹¹ ì—ëŸ¬ì˜ ì´ë¦„

    switch (position) {
      case 'ì´ë³‘':
        this.message = 'ê°œíŒì´êµ°. ë§ì„ ì„ ë°ë ¤ì™€ë´.'; // super, ì¦‰ Error í´ë˜ìŠ¤ì˜ ë©”ì„¸ì§€ (this.message ìœ„ì— ë®ì–´ì”Œì–´ì§)
        break;
      case 'ì¼ë³‘':
        this.message += ' ì—ë“œë ¤ ë»—ì³.'; // super, ì¦‰ Error í´ë˜ìŠ¤ì˜ ë©”ì„¸ì§€ (this.message ë’¤ì— í¬í•¨í•´ì„œ message ì¶œë ¥)
        break;
      case 'ìƒë³‘':
        this.message = 'ì§¬ì„ ê±°ê¾¸ë¡œ ë¨¹ì—ˆë‚˜. ' + this.message; // super, ì¦‰ Error í´ë˜ìŠ¤ì˜ ë©”ì„¸ì§€ (í•´ë‹¹ ë©”ì„¸ì§€ ë’¤ this.messageê°€ ì¶œë ¥)
        break;
      default:
        this.message = 'ì§‘ì— ê°ˆ ë•Œ ëë‹¤ ì´ê±°ì§€? ã…ã…'; // super, ì¦‰ Error í´ë˜ìŠ¤ì˜ ë©”ì„¸ì§€ (this.message ìœ„ì— ë®ì–´ì”Œì–´ì§)
    }
  }
}

class Soldier {
  constructor (position) {
    this.position = position;
  }

  speak (word) {
    console.log(this.position + ':', word);
    try {
      if (!'ë‹¤ë‚˜ê¹Œ'.includes(word.at(-1))) {
        throw new MilitaryError(
          this.position,
          'êµ°ëŒ€ì—ì„œ ëª¨ë“  ë§ì€ ë‹¤ë‚˜ê¹Œë¡œ ëë‚¸ë‹¤.'
        );
      }

    } catch (e) {
      console.error(e);
    }
  }
}
```
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/a6a2c388-e441-4dc9-b397-1e93f1dd3472">
</div>

```js
['ì´ë³‘', 'ì¼ë³‘', 'ìƒë³‘', 'ë³‘ì¥'].forEach(pos => {
  const soldier = new Soldier(pos);
  soldier.speak('ë¬´ìŠ¨ ì¼ì…ë‹ˆê¹Œ'); // ë‹¤ë‚˜ê¹Œë¡œ ëë‚˜ë¯€ë¡œ ì •ìƒì  ì‹¤í–‰
  soldier.speak('ì™œìš”'); // ë‹¤ë‚˜ê¹Œë¡œ ëë‚˜ì§€ ì•Šìœ¼ë¯€ë¡œ MilitrayError ë°œìƒ
});
```
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/67aa97dd-953e-4a6e-ab9f-376b887a0b31">
</div>

-----
### Error Bubbling
-----
1. ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œ í–ˆì„ ë•Œ
   - ì—ëŸ¬ ë°œìƒ ì‹œ í•´ë‹¹ í•¨ìˆ˜ì—ì„œ ì¡ì§€ ì•Šìœ¼ë©´ í˜¸ì¶œí•œ ê³³ìœ¼ë¡œ ë˜ì ¸ì§
   - ë‹¤ì¤‘ í˜¸ì¶œ ì‹œ ì—ëŸ¬ë¥¼ í•¸ë“¤ë§í•˜ëŠ” ì½”ë“œê°€ ìˆëŠ” í˜¸ì¶œìê¹Œì§€ ì „ë‹¬ë¨
   - ë‹¤ìŒ ì½”ë“œëŠ” func4 - func3 - func3 - func1 ìˆœìœ¼ë¡œ í˜¸ì¶œë˜ë©°, func1ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí–ˆìœ¼ë‚˜ ì²˜ë¦¬í•˜ì§€ ì•Šì•˜ìŒ
   - func1ì— ì˜í•´ ì—ëŸ¬ê°€ ë°œìƒí–ˆìœ¼ë‚˜ ì¢…ë£Œë˜ì§€ ì•Šê³ , ì´ë¥¼ í˜¸ì¶œí•œ ê³³ë“¤ë¡œ ê³„ì† ì—ëŸ¬ê°€ ë˜ì ¸ì§€ê³ , ì´ë¥¼ func4ì—ì„œ ì²˜ë¦¬
```js
function func1 () {
  throw new Error('ì—ëŸ¬');
}

function func2 () {
  func1();
}

function func3 () {
  func2();
}

function func4 () {
  try {
    func3();

  } catch (e) {
    console.error(e);
  }
  console.log('ì‹¤í–‰ì™„ë£Œ');
}

func4();
```
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/7482a4b0-5f4b-40c0-b006-098c5669fe3d">
</div>

  - ê·¸ëŸ¬ë‚˜, ì—ëŸ¬ëŠ” ê°€ëŠ¥í•œ ë°œìƒí•œ ê³³ ê°€ê¹Œì´ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ

```js
function func1 (e) { // ì‚¬ì›
  try {
    if (e) { throw e }
    console.log('ì € ê°€ ë´ë„ ë˜ì£ ?');
    console.log('- - - - - - - - - -');

  } catch (e) {
    if (e instanceof SyntaxError) {
      console.error('ì € ì´ê±´ ì•Œì•„ìš”!', e);
      console.log('- - - - - - - - - -');
      return;
    }
    console.log('ëŒ€ë¦¬ë‹˜, ì´ê±° ë­ì—ìš”?');
    throw e; // ğŸ’¡ ì²˜ë¦¬í•˜ì§€ ëª»í•˜ëŠ” ì—ëŸ¬ëŠ” ìœ—ì„ ìœ¼ë¡œ ë˜ì§
  }
}

function func2 (e) { // ëŒ€ë¦¬
  try {
    func1(e);
  } catch (e) {
    if (e instanceof TypeError) {
      console.error('ë‚´ê°€ í•  í…Œë‹ˆ ê°€ë´ìš”.', e);
      console.log('- - - - - - - - - -');
      return;
    }
    console.log('ë¶€ì¥ë‹˜, ì´ê±´ ì œ ì„ ì—ì„œ ì•ˆ ë˜ê² ìŠµë‹ˆë‹¤.');
    throw e; // TypeErrorê°€ ì•„ë‹Œ ê²½ìš°
  }
}

function func3 (e) { // ë¶€ì¥
  try {
    func2(e);
  } catch (e) {
    if (e instanceof ReferenceError) {
      console.error('ì˜ í•˜ì, ì‘?', e);
      console.log('- - - - - - - - - -');
      return;
    }
    console.log('ì‚¬ì¥ë‹˜, ì´ê²ƒ ì¢€ ë³´ì…”ì•¼ê² ìŠµë‹ˆë‹¤.');
    throw e; // ReferenceErrorê°€ ì•„ë‹Œ ê²½ìš°
  }
}

function func4 (e) { // ì‚¬ì¥
  try {
    func3(e);

  } catch (e) {
    console.error('ì „ì› ì§‘í•©.', e);
  }
}
```

```js
func4();

func4(new SyntaxError());

func4(new TypeError());

func4(new ReferenceError);

func4(new RangeError);
```
<div align="center">
<img src="https://github.com/sooyounghan/JavaScript/assets/34672301/382774f1-0112-4704-b57d-6c760a6e6e0d">
</div>
